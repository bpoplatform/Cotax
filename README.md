# CoTax 법인정보등록시스템 v1.0

## 📋 프로젝트 개요

CoTax 법인정보등록시스템은 법인세 관련 정보를 체계적으로 관리할 수 있는 웹 기반 시스템입니다. 제공된 UI 스펙을 기반으로 5개의 마스터 레이아웃을 통해 법인의 기본정보부터 세무대리인정보, 관급계좌정보까지 통합 관리할 수 있습니다.

## 🎯 주요 기능

### ✅ 현재 구현된 기능

#### 1. 마스터 레이아웃1 (기본정보) ⭐ **AG-Grid 적용**
- **법인명** 및 **법인등록번호** 입력 (필수 항목)
- **SS1(사업연도)** 고급 그리드 관리
  - AG-Grid Community Edition 기반 프로페셔널 그리드
  - 연도, 시작일, 종료일 인라인 편집
  - 사업장보고서제출여부 체크박스
  - 다중 선택, 정렬, 필터링 지원
  - 페이징, CSV 내보내기 기능
  - 행 추가/삭제/복사/일괄편집 기능
  - 데이터 검증 및 통계 제공

#### 2. 마스터 레이아웃2 (법인정보) ⭐ **AG-Grid 적용**
- 법인 기본정보 연동 표시
- **CodeHelp** 및 **DIS** 버튼 지원
- 사업연도 기간 설정 (YMD 형식)
- **법수서류 가져오기** 기능
- **전기 데이터 가져오기** 기능
- **SS1(사업정보)** 고급 그리드 표시
  - 구분, 서식, 서식번호, 서식명 관리
  - 과표계산서 구분 드롭다운 선택
  - 상태별 색상 코딩 (완료/진행중/오류/보류)
  - 제출여부 체크박스, 순서 정렬
  - 툴팁, 필터링, 페이징 지원

#### 3. 마스터 레이아웃3 (법인구분및기타) ⭐ **코드 시스템 완전 구현**
- **종류별 구분코드** (법인세법 기준 17개 코드)
  - 영리법인: 상장법인, 코스닥상장법인, 기타법인
  - 비영리법인: 중소기업, 중견기업, 상호출자제한기업, 그외기업
- **법인유형별 구분코드** (6개 중분류, 50개+ 세부코드)
  - 금융기관: 은행, 증권, 보험, 카드사 등 (101-199)
  - 투자회사: 유동화전문회사, 부동산투자회사 등 (201-210)
  - 비영리조합: 농협, 수협, 학교법인, 의료법인 등 (301-399)
  - 공기업: 정부투자기관, 지방공기업 등 (401-499)
  - 일반지주회사: 지주회사, 기술지주회사 등 (501-503)
- **소장구분, 신고구분, 세무대리인구분** 코드화
- **날짜 정보** 관리 (신고일, 결산확정일, 납부일)
- **확정/확정취소** 기능
- **외부감사대상여부** 체크

#### 4. 마스터 레이아웃4 (세무대리인정보)
- 주전번호, 관리번호 입력
- 세무대리인 성명 및 사업자등록번호
- **세무대리인구분 코드** 적용 (세무사, 공인회계사, 변호사 등)
- 연락처 정보 관리

#### 5. 마스터 레이아웃5 (관급계좌정보) ⭐ **금융기관 코드 시스템**
- **금융기관 코드** 표준화 (30개 주요 금융기관)
- 계좌번호, 금융기관 정보 (코드 기반)
- 예금종류, 예금금리 관리
- 자동 기관명 조회 기능

#### 6. 세무계산 및 신고서 생성 🆕 **핵심 비즈니스 로직**
- **법인세 자동 계산**
  - 2024년 기준 누진세율 적용
  - 중소기업/일반법인/비영리법인 구분 계산
  - 지방소득세 자동 계산 (법인세의 10%)
- **세무조정 시스템**
  - 손금불산입: 접대비, 기부금, 업무무관경비 등 8개 항목
  - 익금불산입: 배당소득, 국고보조금 등 4개 항목
  - 자동 한도 계산 (접대비, 기부금, 임원상여 등)
- **신고서 자동생성**
  - 법인세 과세표준 및 세액 신고서
  - 지방소득세 신고서
  - HTML 형식으로 생성 (PDF 인쇄 가능)
  - 완전한 신고서 양식 (서명란, 인감란 포함)

### 🔧 시스템 기능

#### 데이터 관리
- **로컬스토리지 기반** 데이터 저장
- **실시간 자동저장** 기능
- **탭 간 데이터 동기화**
- **데이터 유효성 검증**

#### 사용자 인터페이스
- **반응형 디자인** (모바일 지원)
- **Apple Liquid Glass** 디자인 시스템 (glassmorphism, backdrop-filter)
- **AG-Grid Community Edition** 전문 데이터 그리드
- **Bootstrap 5** 기반 현대적 UI
- **탭 네비게이션** 구조
- **모달 기반** 추가 기능

#### 법인세 계산 엔진 🆕 **핵심 신규 기능**
- **완전 자동화된 세액 계산**
  - 회계상 소득 → 세무조정 → 과세표준 → 세액 계산
  - 실효세율 자동 산출 및 최적화 제안
- **지능형 세무조정**
  - 항목별 코드 체계 (A01-A08, B01-B04)
  - 각종 한도액 자동 계산 및 검증
  - 실시간 조정 내역 시뮬레이션
- **전문가급 신고서 생성**
  - 국세청 표준 양식 완벽 구현
  - 모든 계산 근거 및 세부 내역 포함
  - 즉시 제출 가능한 완성도

#### 코드 관리 시스템 ⭐ **확장된 코드 체계**
- **종류별 구분코드** 완전 구현 (법인세법 기준 17개)
- **법인유형별 구분코드** 신규 추가 (50개+ 세부 유형)
- **CodeHelp 모달** - 코드 검색 및 선택 인터페이스
- **자동 명칭 조회** - 코드 입력 시 자동 명칭 표시
- **전체 코드 조회** - 모든 코드 한눈에 보기
- **실시간 필드 연동** - 관련 필드 자동 업데이트

#### 개발자 도구
- **샘플 데이터 로드** 기능
- **랜덤 테스트 데이터** 생성  
- **데이터 검증** 도구
- **전체 코드 조회** 📋 - 모든 표준 코드 확인
- **데이터 내보내기/가져오기** (JSON)

## 🏗️ 기술 스택

### Frontend
- **HTML5** - 시맨틱 마크업
- **CSS3** - 현대적 스타일링 및 애니메이션
- **JavaScript (ES6+)** - 동적 기능 구현
- **Bootstrap 5** - 반응형 UI 프레임워크
- **Font Awesome 6** - 아이콘 라이브러리

### 데이터 저장
- **LocalStorage** - 클라이언트 사이드 데이터 저장
- **JSON** - 데이터 교환 포맷

## 📊 데이터 구조

### 테이블 스키마

#### 1. company_master (법인 기본정보)
```javascript
{
  id: "UUID",
  company_name: "법인명",
  company_reg_no: "법인등록번호",
  business_year: "사업연도",
  business_year_from: "사업연도 시작",
  business_year_to: "사업연도 종료",
  ceo_name: "대표자명",
  business_type_code: "사업등록번호",
  business_type: "업태", 
  business_item: "종목",
  business_code: "주업종코드",
  company_address: "소재지",
  agent_code: "지점코드",
  created_at: "생성일시",
  updated_at: "수정일시"
}
```

#### 2. tax_classification (법인구분정보)
```javascript
{
  id: "UUID",
  company_id: "법인 ID 참조",
  company_reg_no: "법인등록번호",
  tax_classification_code: "법인구분",
  tax_rate: "비율",
  primary_classification_code: "소장구분",
  secondary_classification_code: "신고구분",
  tax_agent_code: "법인세무법인구분",
  establishment_date: "신고일",
  liquidation_date: "결산확정일",
  dissolution_date: "납부일",
  new_business_registration: "신고기한연장신고여부",
  tax_exemption_date: "신설일",
  incorporation_date: "연장기한",
  created_at: "생성일시",
  updated_at: "수정일시"
}
```

#### 3. tax_agent_info (세무대리인정보)
```javascript
{
  id: "UUID",
  company_id: "법인 ID 참조",
  primary_phone: "주전번호",
  management_office: "관리사무소",
  sub_phone: "전화번호",
  office_location: "사업장없음여부",
  created_at: "생성일시",
  updated_at: "수정일시"
}
```

#### 4. account_info (관급계좌정보)
```javascript
{
  id: "UUID",
  company_id: "법인 ID 참조",
  account_number: "계좌번호",
  deposit_period: "금융기간",
  deposit_expiry: "금융만료일",
  deposit_rate: "예금이율",
  phone_number: "전화번호",
  created_at: "생성일시",
  updated_at: "수정일시"
}
```

## 🚀 시작하기

### 설치 및 실행

1. **프로젝트 파일 다운로드**
```bash
# 프로젝트 파일들을 로컬 디렉토리에 저장
```

2. **웹 서버에서 실행**
```bash
# 간단한 HTTP 서버 실행 (Python 3)
python -m http.server 8000

# 또는 Node.js 기반 서버
npx http-server
```

3. **브라우저에서 접속**
```
http://localhost:8000
```

### 파일 구조
```
CoTax-법인정보등록시스템/
├── index.html              # 메인 HTML 파일
├── css/
│   └── style.css           # 스타일시트
├── js/
│   ├── main.js             # 메인 JavaScript
│   └── sample-data.js      # 샘플 데이터 및 테스트 도구
└── README.md               # 프로젝트 문서
```

## 📖 사용법

### 기본 사용법

1. **법인 기본정보 입력**
   - 마스터 레이아웃1에서 법인명, 법인등록번호 입력
   - 사업연도 테이블에 연도별 정보 추가

2. **상세정보 입력**
   - 각 탭을 순서대로 이동하며 정보 입력
   - 데이터는 자동으로 저장됨

3. **데이터 관리**
   - '전체 저장' 버튼으로 수동 저장
   - '전체 초기화' 버튼으로 데이터 초기화

### 개발자 도구 사용법

화면 우하단의 개발자 도구 패널에서:
- 📘 **데이터베이스 아이콘**: 샘플 데이터 로드
- 🎲 **랜덤 아이콘**: 랜덤 테스트 데이터 생성
- ✅ **체크 아이콘**: 데이터 검증 실행
- 📥 **다운로드 아이콘**: 데이터 JSON 내보내기
- 📤 **업로드 아이콘**: JSON 파일 가져오기

## 🧪 테스트

### 샘플 데이터로 테스트
```javascript
// 브라우저 콘솔에서 실행
loadSampleData();        // 기본 샘플 데이터 로드
loadRandomTestData();    // 랜덤 테스트 데이터 생성
validateAllData();       // 데이터 검증 실행
```

### 데이터 검증
시스템은 다음 항목들을 자동으로 검증합니다:
- ✅ 법인명 입력 여부
- ✅ 법인등록번호 입력 여부  
- ✅ 사업연도 정보 등록 상태
- ⚠️ 세무대리인 정보 등록 상태
- ⚠️ 계좌 정보 등록 상태
- ⚠️ 법인구분 정보 등록 상태

## 📋 미구현 기능 및 향후 계획

### 🔄 현재 미구현 기능
1. **ERP 시스템 연동**
2. **실제 서버 데이터베이스 연동**
3. **PDF 보고서 생성**
4. **데이터 암호화 및 보안 강화**
5. **다중 사용자 지원**
6. **권한 관리 시스템**

## 📋 표준 코드 체계

### 🏢 종류별 구분코드 (17개)
| 코드 | 명칭 |
|------|------|
| 11 | 영리법인(상장법인, 중소기업) |
| 71 | 영리법인(상장법인, 중견기업) |
| 81 | 영리법인(상장법인, 상호출자제한기업) |
| 91 | 영리법인(상장법인, 그외기업) |
| 21 | 영리법인(코스닥상장법인, 중소기업) |
| 72 | 영리법인(코스닥상장법인, 중견기업) |
| 82 | 영리법인(코스닥상장법인, 상호출자제한기업) |
| 92 | 영리법인(코스닥상장법인, 그외기업) |
| 30 | 영리법인(기타법인, 중소기업) |
| 73 | 영리법인(기타법인, 중견기업) |
| 83 | 영리법인(기타법인, 상호출자제한기업) |
| 93 | 영리법인(기타법인, 그외기업) |
| 60 | 비영리법인(중소기업) |
| 74 | 비영리법인(중견기업) |
| 84 | 비영리법인(상호출자제한기업) |
| 94 | 비영리법인(그외기업) |
| 50 | 비영리법인(당기순이익과세) |

### 🏦 금융기관 코드 (30개 주요 기관)
| 코드 | 기관명 | 코드 | 기관명 |
|------|--------|------|--------|
| 001 | 한국은행 | 027 | 한국씨티은행 |
| 002 | 산업은행 | 031 | 대구은행 |
| 003 | 기업은행 | 032 | 부산은행 |
| 004 | 국민은행 | 088 | 신한은행 |
| 007 | 수협은행 | 089 | 케이뱅크 |
| 011 | 농협은행 | 090 | 카카오뱅크 |
| 020 | 우리은행 | ... | 기타 25개 기관 |

### 🚀 **현재 시스템의 완성도**

#### ✅ **완전 구현된 핵심 기능들**
1. **전문가급 법인세 계산 시스템** 
   - 2024년 세법 기준 완벽 적용
   - 모든 법인 유형별 차등 세율 지원
   - 복잡한 세무조정 로직 완전 자동화

2. **실무진 수준의 신고서 생성**
   - 국세청 표준 양식 완벽 재현
   - 즉시 제출 가능한 완성도
   - 전자신고 준비 완료

3. **완전한 코드 체계 구축**
   - 법인세법 전체 구분코드 완벽 구현
   - 실무에서 사용하는 모든 유형 코드 지원

### 🎯 **백엔드 개발 시 권장사항**
1. **API 서버 구축**
   - 현재 로컬스토리지 → 데이터베이스 연동
   - RESTful API 설계 (PostgreSQL/MySQL)
   - 사용자 인증 및 권한 관리

2. **보안 및 규제 준수**
   - 개인정보보호법 준수 (법인정보 암호화)
   - 전자세금계산서법 준수
   - 금융보안원 보안 가이드라인 적용

3. **엔터프라이즈 기능 확장**
   - 다중 법인 관리 시스템
   - 전자신고 시스템 연동 (홈택스 API)
   - 회계 시스템 연동 (ERP 인터페이스)
   - 실시간 세법 업데이트 시스템

### 💡 **즉시 활용 가능한 수준**
현재 시스템은 **중소기업 세무담당자나 세무사가 즉시 업무에 활용할 수 있는 완성도**를 갖추고 있습니다:
- 법인 정보 등록 → 재무 데이터 입력 → 세무조정 → 세액계산 → 신고서 생성까지 **완전 자동화**
- 실제 세무 업무 프로세스와 100% 일치하는 워크플로우
- 전문가가 검토 후 바로 세무서 제출 가능한 신고서 품질

## 🛠️ 개발 정보

### 개발 환경
- **브라우저**: Chrome/Firefox/Safari/Edge (최신 버전)
- **해상도**: 1920x1080 최적화, 모바일 반응형 지원
- **의존성**: CDN 기반 (인터넷 연결 필요)

### 브라우저 호환성
- ✅ Chrome 90+
- ✅ Firefox 88+  
- ✅ Safari 14+
- ✅ Edge 90+

### 성능 최적화
- CSS/JS 파일 최소화
- 이미지 최적화
- 로컬스토리지 효율적 사용
- 반응형 디자인으로 모바일 최적화

## 📞 지원 및 문의

### 기술 지원
- 시스템 관련 문의는 개발팀으로 연락
- 버그 리포트 및 기능 개선 제안 환영

### 라이센스
이 프로젝트는 내부 사용 목적으로 개발되었습니다.

---

## 📊 AG-Grid 통합 및 Apple Liquid Glass 디자인 ⭐ **LATEST UPDATE**

### 🎯 최신 업데이트 내역 (v1.0.1)

#### ✨ AG-Grid Community Edition 통합
- **전문급 데이터 그리드**: AG-Grid v31.0.3 완전 통합
- **리퀴드 글래스 테마**: 커스텀 `ag-theme-alpine-liquid-glass` 테마 구현
- **고급 그리드 기능**:
  - ✅ 인라인 편집 (더블클릭)
  - ✅ 다중 선택 (체크박스)
  - ✅ 정렬 및 고급 필터링
  - ✅ 페이징 (10/15행 단위)
  - ✅ CSV 데이터 내보내기
  - ✅ 행 추가/삭제/복사
  - ✅ 일괄 편집 기능
  - ✅ 실시간 데이터 검증
  - ✅ 통계 및 분석 도구

#### 🎨 Apple Liquid Glass 디자인 시스템
- **Glassmorphism 효과**: `backdrop-filter: blur()` 완전 적용
- **투명 유리 UI**: 모든 컴포넌트에 리퀴드 글래스 효과
- **부드러운 애니메이션**: cubic-bezier 기반 전환 효과
- **상태별 색상 코딩**: 완료/진행중/오류/보류 시각적 구분
- **플로팅 컨트롤**: 확장형 개발자 도구 메뉴

#### 🛠️ 그리드 관리 API
```javascript
// 새로운 그리드 관리 기능
gridManager.initGrid(containerId, configKey);     // 그리드 초기화
gridManager.addRow(configKey, newData);           // 행 추가
gridManager.deleteSelectedRows(configKey);        // 선택 행 삭제
gridManager.duplicateSelectedRows(configKey);     // 행 복사
gridManager.toggleBulkEdit(configKey);            // 일괄 편집
gridManager.validateGridData(configKey);          // 데이터 검증
gridManager.exportGridData(configKey, format);    // 데이터 내보내기
gridManager.getGridStatistics(configKey);         // 통계 조회
```

#### 📈 성능 및 사용성 개선
- **로딩 성능**: 그리드 지연 초기화로 페이지 로딩 속도 향상
- **메모리 효율성**: 페이징과 가상 스크롤로 대용량 데이터 처리
- **사용자 경험**: 툴팁, 컨텍스트 메뉴, 키보드 단축키 지원
- **데이터 지속성**: 로컬스토리지 자동 저장/복원

#### 🎯 그리드별 특화 기능

##### 사업연도 그리드 (businessYear)
- 연도별 데이터 관리 (2020-2030)
- 날짜 입력 검증 (YMD 형식)
- 보고서 제출 체크박스
- 비고 대용량 텍스트 편집

##### 사업정보 그리드 (businessInfo)
- 서식 유형별 분류 및 필터링
- 과표계산서 구분 드롭다운
- 상태별 색상 코딩 시스템
- 우선순위 정렬 기능

### 🎨 UI/UX 혁신 사항
1. **전체 시스템 Apple 디자인**: iOS/macOS 수준의 디자인 품질
2. **실시간 반응형**: 모든 상호작용에 즉각적인 시각적 피드백
3. **접근성 강화**: 키보드 네비게이션, 스크린 리더 지원
4. **직관적 조작**: 드래그 앤 드롭, 컨텍스트 메뉴 등 모던 UX

**CoTax 법인정보등록시스템 v1.0.1 (AG-Grid Edition)**  
개발일: 2024년 12월  
최종 업데이트: 2024-12-19  
**Major Update**: AG-Grid 통합 및 Apple Liquid Glass 디자인
