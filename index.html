<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoTax 법인정보등록시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <!-- AG-Grid Community Edition CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@31.0.3/styles/ag-grid.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@31.0.3/styles/ag-theme-alpine.css">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <!-- 헤더 -->
        <div class="row bg-primary text-white py-3">
            <div class="col">
                <h2 class="mb-0">
                    <i class="fas fa-building me-2"></i>
                    CoTax 법인정보등록시스템 v1.0
                </h2>
            </div>
        </div>

        <!-- 메인 네비게이션 -->
        <div class="row bg-light border-bottom">
            <div class="col">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container-fluid">
                        <ul class="navbar-nav me-auto">
                            <li class="nav-item">
                                <a class="nav-link active" href="#" data-tab="master1">
                                    <i class="fas fa-info-circle me-1"></i>
                                    신규
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-tab="master2">
                                    <i class="fas fa-edit me-1"></i>
                                    조회
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-tab="master3">
                                    <i class="fas fa-file-alt me-1"></i>
                                    저장
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-tab="master4">
                                    <i class="fas fa-print me-1"></i>
                                    행삭제
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" data-tab="master5">
                                    <i class="fas fa-times me-1"></i>
                                    삭제
                                </a>
                            </li>
                        </ul>
                        <div class="d-flex">
                            <button class="btn btn-outline-secondary me-2" onclick="showERPDialog()">
                                ERP연결
                            </button>
                            <button class="btn btn-outline-info" onclick="showHelpDialog()">
                                도움말
                            </button>
                        </div>
                    </div>
                </nav>
            </div>
        </div>

        <!-- 메인 컨텐츠 영역 -->
        <div class="row mt-3">
            <div class="col">
                <!-- 화면 레이아웃 탭 네비게이션 -->
                <div class="tab-navigation mb-3">
                    <ul class="nav nav-tabs" id="layoutTabs">
                        <li class="nav-item">
                            <a class="nav-link active" id="layout1-tab" data-bs-toggle="tab" href="#layout1" role="tab">
                                마스터 레이아웃1(기본정보)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="layout2-tab" data-bs-toggle="tab" href="#layout2" role="tab">
                                마스터 레이아웃2(법인정보)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="layout3-tab" data-bs-toggle="tab" href="#layout3" role="tab">
                                마스터 레이아웃3(법인구분및기타)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="layout4-tab" data-bs-toggle="tab" href="#layout4" role="tab">
                                마스터 레이아웃4(세무대리인정보)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="layout5-tab" data-bs-toggle="tab" href="#layout5" role="tab">
                                마스터 레이아웃5(관급계좌정보)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-success" id="taxCalculation-tab" data-bs-toggle="tab" href="#taxCalculation" role="tab">
                                <i class="fas fa-calculator me-1"></i>
                                세무계산 및 신고서생성
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- 탭 컨텐츠 -->
                <div class="tab-content" id="layoutTabContent">
                    <!-- 마스터 레이아웃1 (기본정보) -->
                    <div class="tab-pane fade show active" id="layout1" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0">마스터 레이아웃1(기본정보)</h5>
                            </div>
                            <div class="card-body">
                                <form id="layout1Form">
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인명 *</label>
                                            <input type="text" class="form-control" id="companyName" name="company_name" required>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인등록번호 *</label>
                                            <input type="text" class="form-control" id="companyRegNo" name="company_reg_no" required>
                                        </div>
                                    </div>
                                    
                                    <!-- SS1(사업연도) 그리드 -->
                                    <div class="row mb-3">
                                        <div class="col-12">
                                            <h6 class="text-primary mb-3">
                                                <i class="fas fa-table me-2"></i>
                                                SS1(사업연도)
                                            </h6>
                                            <!-- 그리드 컨트롤 버튼 -->
                                            <div class="d-flex flex-wrap gap-2 mb-3">
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-success btn-sm" onclick="addBusinessYearRow()">
                                                        <i class="fas fa-plus"></i> 행 추가
                                                    </button>
                                                    <button type="button" class="btn btn-warning btn-sm" onclick="deleteSelectedBusinessYearRows()">
                                                        <i class="fas fa-trash"></i> 선택 삭제
                                                    </button>
                                                    <button type="button" class="btn btn-primary btn-sm" onclick="gridManager.duplicateSelectedRows('businessYear')">
                                                        <i class="fas fa-copy"></i> 복사
                                                    </button>
                                                </div>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-info btn-sm" onclick="exportBusinessYearData('csv')">
                                                        <i class="fas fa-download"></i> CSV 내보내기
                                                    </button>
                                                    <button type="button" class="btn btn-secondary btn-sm" onclick="gridManager.validateGridData('businessYear')">
                                                        <i class="fas fa-check-circle"></i> 검증
                                                    </button>
                                                </div>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="gridManager.toggleBulkEdit('businessYear')">
                                                        <i class="fas fa-edit"></i> 일괄편집
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="gridManager.refreshGrid('businessYear')">
                                                        <i class="fas fa-sync"></i> 새로고침
                                                    </button>
                                                </div>
                                            </div>
                                            <!-- AG-Grid 컨테이너 -->
                                            <div id="businessYearGrid" class="ag-theme-alpine-liquid-glass liquid-glass-grid"></div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 마스터 레이아웃2 (법인정보) -->
                    <div class="tab-pane fade" id="layout2" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0">마스터 레이아웃2(법인정보)</h5>
                            </div>
                            <div class="card-body">
                                <form id="layout2Form">
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인명</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="companyName2" name="company_name" readonly>
                                                <button class="btn btn-outline-secondary" type="button" onclick="openCodeHelp('company')">CodeHelp</button>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인등록번호</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="companyRegNo2" name="company_reg_no" readonly>
                                                <button class="btn btn-outline-secondary" type="button">DIS</button>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">사업연도</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="businessYear2" name="business_year" readonly>
                                                <button class="btn btn-outline-secondary" type="button" onclick="openCodeHelp('business_year')">CodeHelp</button>
                                                <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                                <span class="input-group-text">~</span>
                                                <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-12">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-warning" onclick="showBusinessRegistration()">
                                                    법수서류 가져오기
                                                </button>
                                                <button type="button" class="btn btn-warning" onclick="showBusinessInfo()">
                                                    전기(데이터(법인기정/계명/세무내용 리스트/계산정보) 가져오기
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SS1(사업정보) 그리드 -->
                                    <div class="row mb-3">
                                        <div class="col-12">
                                            <h6 class="text-primary mb-3">
                                                <i class="fas fa-table me-2"></i>
                                                SS1(사업정보)
                                            </h6>
                                            <!-- 그리드 컨트롤 버튼 -->
                                            <div class="d-flex flex-wrap gap-2 mb-3">
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-success btn-sm" onclick="addBusinessInfoRow()">
                                                        <i class="fas fa-plus"></i> 행 추가
                                                    </button>
                                                    <button type="button" class="btn btn-warning btn-sm" onclick="deleteSelectedBusinessInfoRows()">
                                                        <i class="fas fa-trash"></i> 선택 삭제
                                                    </button>
                                                    <button type="button" class="btn btn-primary btn-sm" onclick="gridManager.duplicateSelectedRows('businessInfo')">
                                                        <i class="fas fa-copy"></i> 복사
                                                    </button>
                                                </div>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-info btn-sm" onclick="exportBusinessInfoData('csv')">
                                                        <i class="fas fa-download"></i> CSV 내보내기
                                                    </button>
                                                    <button type="button" class="btn btn-secondary btn-sm" onclick="gridManager.validateGridData('businessInfo')">
                                                        <i class="fas fa-check-circle"></i> 검증
                                                    </button>
                                                </div>
                                                <div class="btn-group" role="group">
                                                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="gridManager.toggleBulkEdit('businessInfo')">
                                                        <i class="fas fa-edit"></i> 일괄편집
                                                    </button>
                                                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="gridManager.refreshGrid('businessInfo')">
                                                        <i class="fas fa-sync"></i> 새로고침
                                                    </button>
                                                </div>
                                                <button type="button" class="btn btn-outline-info btn-sm" onclick="showGridStatistics('businessInfo')">
                                                    <i class="fas fa-chart-bar"></i> 통계
                                                </button>
                                            </div>
                                            <!-- AG-Grid 컨테이너 -->
                                            <div id="businessInfoGrid" class="ag-theme-alpine-liquid-glass liquid-glass-grid"></div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 마스터 레이아웃3 (법인구분및기타) -->
                    <div class="tab-pane fade" id="layout3" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0">마스터 레이아웃3(법인구분및기타)</h5>
                            </div>
                            <div class="card-body">
                                <form id="layout3Form">
                                    <!-- 기본 정보 입력 필드들 -->
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인명</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="companyName3" readonly>
                                                <button class="btn btn-outline-secondary" type="button">CodeHelp</button>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">법인등록번호</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="companyRegNo3" readonly>
                                                <button class="btn btn-outline-secondary" type="button">DIS</button>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">사업연도</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="businessYear3" readonly>
                                                <button class="btn btn-outline-secondary" type="button">CodeHelp</button>
                                                <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                                <span class="input-group-text">~</span>
                                                <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-12">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-warning" onclick="showTaxClassification()">
                                                    전기(데이터(법인기/계명/세무내용 리스트/계산정보) 가져오기
                                                </button>
                                                <button type="button" class="btn btn-warning" onclick="showTaxAgentInfo()">
                                                    서식/법인세내역 가져오기
                                                </button>
                                                <button type="button" class="btn btn-warning" onclick="confirmData()">
                                                    확정
                                                </button>
                                                <button type="button" class="btn btn-warning" onclick="confirmCancel()">
                                                    확정취소
                                                </button>
                                                <div class="form-check form-check-inline ms-2">
                                                    <input class="form-check-input" type="checkbox" id="confirmCheck">
                                                    <label class="form-check-label" for="confirmCheck">
                                                        확정 □
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 마스터 레이아웃2(법인정보) 폼 -->
                                    <div class="border p-3 mb-3">
                                        <h6 class="text-primary mb-3">마스터 레이아웃2(법인정보)</h6>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label">전화번호</label>
                                                <input type="text" class="form-control" name="phone_number">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">대표자성명</label>
                                                <input type="text" class="form-control" name="ceo_name">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">전자우편주소</label>
                                                <input type="email" class="form-control" name="email">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">수시법과기간</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                                    <span class="input-group-text">~</span>
                                                    <input type="text" class="form-control" style="max-width: 60px;" placeholder="YMD">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label text-danger">사업등록번호 *</label>
                                                <input type="text" class="form-control" name="business_reg_no" placeholder="000-00-00000">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">업태</label>
                                                <input type="text" class="form-control" name="business_type" placeholder="제조업, 서비스업 등">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">종목</label>
                                                <input type="text" class="form-control" name="business_item" placeholder="소프트웨어 개발 등">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">주업종코드</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="main_business_code" placeholder="62010">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('business_type', 'mainBusinessCode')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label text-danger">법인유형별구분코드 *</label>
                                                <div class="input-group">
                                                    <select class="form-select" name="corporation_type_code" id="corporationTypeSelect">
                                                        <option value="">선택</option>
                                                        <optgroup label="금융기관">
                                                            <option value="101">101 - 은행</option>
                                                            <option value="102">102 - 증권</option>
                                                            <option value="103">103 - 생명보험</option>
                                                            <option value="104">104 - 손해보험</option>
                                                            <option value="105">105 - 금융지주회사</option>
                                                            <option value="199">199 - 기타금융회사</option>
                                                        </optgroup>
                                                        <optgroup label="투자회사">
                                                            <option value="201">201 - 유동화전문회사</option>
                                                            <option value="202">202 - 투자회사 등</option>
                                                            <option value="203">203 - 기업구조조정부동산투자회사</option>
                                                        </optgroup>
                                                        <optgroup label="비영리조합">
                                                            <option value="301">301 - 정비사업조합</option>
                                                            <option value="302">302 - 농협</option>
                                                            <option value="303">303 - 수협</option>
                                                            <option value="308">308 - 학교법인</option>
                                                            <option value="309">309 - 의료법인</option>
                                                        </optgroup>
                                                        <optgroup label="공기업">
                                                            <option value="401">401 - 정부투자기관</option>
                                                            <option value="402">402 - 정부출자기관</option>
                                                            <option value="403">403 - 지방공기업(투자)</option>
                                                        </optgroup>
                                                        <optgroup label="기타">
                                                            <option value="100">100 - 기타법인</option>
                                                        </optgroup>
                                                    </select>
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('corporation_type', 'corporationTypeSelect')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                                <small class="form-text text-muted">법인의 사업영역에 따른 유형 구분</small>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">법인유형명</label>
                                                <input type="text" class="form-control" name="corporation_type_name" id="corporationTypeName" readonly placeholder="자동입력">
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">소재지</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="address">
                                                    <button class="btn btn-outline-secondary" type="button">CodeHelp</button>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">지점코드</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="branch_code" readonly>
                                                    <button class="btn btn-outline-secondary" type="button">DIS</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 마스터 레이아웃3(법인구분및기타) 폼 -->
                                    <div class="border p-3 mb-3">
                                        <h6 class="text-primary mb-3">마스터 레이아웃3(법인구분및기타)</h6>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label text-danger">종류별구분코드 *</label>
                                                <div class="input-group">
                                                    <select class="form-select" name="tax_classification" id="taxClassificationSelect">
                                                        <option value="">선택</option>
                                                    </select>
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('tax_classification', 'taxClassificationSelect')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                                <small class="form-text text-muted">법인세법에 따른 종류별 구분</small>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">세율</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" name="tax_rate" step="0.01" min="0" max="100">
                                                    <span class="input-group-text">%</span>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label text-danger">소장구분 *</label>
                                                <div class="input-group">
                                                    <select class="form-select" name="primary_classification" id="primaryClassificationSelect">
                                                        <option value="">선택</option>
                                                    </select>
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('primary_classification', 'primaryClassificationSelect')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">외부감사대상여부</label>
                                                <div class="form-check form-check-inline mt-2">
                                                    <input class="form-check-input" type="checkbox" name="external_audit" id="externalAuditCheck">
                                                    <label class="form-check-label" for="externalAuditCheck">대상</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label">중류법구분</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="secondary_classification_code" id="secondaryClassificationCode" placeholder="코드입력">
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('tax_classification', 'secondaryClassificationCode')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">중류구분명</label>
                                                <input type="text" class="form-control" name="secondary_classification_name" id="secondaryClassificationName" readonly placeholder="자동입력">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label text-danger">신고구분 *</label>
                                                <div class="input-group">
                                                    <select class="form-select" name="report_classification" id="reportClassificationSelect">
                                                        <option value="">선택</option>
                                                    </select>
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('report_classification', 'reportClassificationSelect')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">법인세무법인구분</label>
                                                <div class="input-group">
                                                    <select class="form-select" name="tax_agent_classification" id="taxAgentClassificationSelect">
                                                        <option value="">선택</option>
                                                    </select>
                                                    <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('tax_agent_classification', 'taxAgentClassificationSelect')">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label">신고일</label>
                                                <input type="text" class="form-control" name="report_date" placeholder="YMD">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">결산확정일</label>
                                                <input type="text" class="form-control" name="settlement_date" placeholder="YMD">
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">납부일</label>
                                                <input type="text" class="form-control" name="payment_date" placeholder="YMD">
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check mt-4">
                                                    <input class="form-check-input" type="checkbox" name="new_business_extension">
                                                    <label class="form-check-label">신고기한연장신고여부 □</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-3">
                                                <label class="form-label">신설일</label>
                                                <input type="text" class="form-control" name="establishment_date" readonly>
                                                <button class="btn btn-outline-secondary btn-sm mt-1" type="button">DIS</button>
                                            </div>
                                            <div class="col-md-3">
                                                <label class="form-label">연장기한</label>
                                                <input type="text" class="form-control" name="extension_period" readonly>
                                                <button class="btn btn-outline-secondary btn-sm mt-1" type="button">DIS</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 마스터 레이아웃4 (세무대리인정보) -->
                    <div class="tab-pane fade" id="layout4" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0">마스터 레이아웃4(세무대리인정보)</h5>
                            </div>
                            <div class="card-body">
                                <form id="layout4Form">
                                    <div class="row mb-3">
                                        <div class="col-md-3">
                                            <label class="form-label">주전번호</label>
                                            <input type="text" class="form-control" name="primary_phone">
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">관리번호</label>
                                            <input type="text" class="form-control" name="management_number">
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">성명</label>
                                            <input type="text" class="form-control" name="agent_name">
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label">사업자등록번호</label>
                                            <input type="text" class="form-control" name="agent_business_no">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-3">
                                            <label class="form-label">전화번호</label>
                                            <input type="text" class="form-control" name="agent_phone">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 마스터 레이아웃5 (관급계좌정보) -->
                    <div class="tab-pane fade" id="layout5" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0">마스터 레이아웃5(관급계좌정보)</h5>
                            </div>
                            <div class="card-body">
                                <form id="layout5Form">
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">계좌번호 *</label>
                                            <input type="text" class="form-control" name="account_number" placeholder="계좌번호 입력">
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label text-danger">금융기관 *</label>
                                            <div class="input-group">
                                                <select class="form-select" name="bank_code" id="bankCodeSelect">
                                                    <option value="">선택</option>
                                                </select>
                                                <button class="btn btn-outline-secondary" type="button" onclick="showCodeHelp('bank', 'bankCodeSelect')">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label">금융기관명</label>
                                            <input type="text" class="form-control" name="bank_name" id="bankName" readonly placeholder="자동입력">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label class="form-label">금융기관지점</label>
                                            <input type="text" class="form-control" name="bank_branch" placeholder="지점명 입력">
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label">예금종류</label>
                                            <select class="form-select" name="deposit_type">
                                                <option value="">선택</option>
                                                <option value="1">보통예금</option>
                                                <option value="2">정기예금</option>
                                                <option value="3">정기적금</option>
                                                <option value="4">당좌예금</option>
                                                <option value="5">기타</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label">예금금리</label>
                                            <div class="input-group">
                                                <input type="number" class="form-control" name="deposit_rate" step="0.01" min="0" max="100">
                                                <span class="input-group-text">%</span>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- 세무계산 및 신고서 생성 -->
                    <div class="tab-pane fade" id="taxCalculation" role="tabpanel">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">
                                    <i class="fas fa-calculator me-2"></i>
                                    법인세 계산 및 신고서 생성
                                </h5>
                            </div>
                            <div class="card-body">
                                <!-- 재무 데이터 입력 -->
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <h6 class="text-primary mb-3">
                                            <i class="fas fa-chart-line me-1"></i>
                                            재무 데이터 입력
                                        </h6>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label text-danger">매출액 *</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="revenue" placeholder="0" min="0">
                                            <span class="input-group-text">원</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label text-danger">회계상 당기순이익 *</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="bookIncome" placeholder="0">
                                            <span class="input-group-text">원</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">손금</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="expenses" placeholder="0" min="0">
                                            <span class="input-group-text">원</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">총급여액</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="totalSalary" placeholder="0" min="0">
                                            <span class="input-group-text">원</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- 세무조정 항목 -->
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <h6 class="text-warning mb-3">
                                            <i class="fas fa-edit me-1"></i>
                                            세무조정 항목
                                        </h6>
                                        <div class="d-flex gap-2 mb-3">
                                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="addTaxAdjustment('nonDeductible')">
                                                <i class="fas fa-plus"></i> 손금불산입 추가
                                            </button>
                                            <button type="button" class="btn btn-outline-success btn-sm" onclick="addTaxAdjustment('nonTaxable')">
                                                <i class="fas fa-plus"></i> 익금불산입 추가
                                            </button>
                                            <button type="button" class="btn btn-outline-info btn-sm" onclick="calculateAutomaticAdjustments()">
                                                <i class="fas fa-magic"></i> 자동계산
                                            </button>
                                        </div>
                                        <div id="taxAdjustmentsList" class="border rounded p-3 bg-light">
                                            <p class="text-muted mb-0">세무조정 항목이 없습니다. 위 버튼을 클릭하여 추가하세요.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- 계산 실행 버튼 -->
                                <div class="row mb-4">
                                    <div class="col-12 text-center">
                                        <button type="button" class="btn btn-success btn-lg me-3" onclick="executeFullTaxCalculation()">
                                            <i class="fas fa-calculator me-2"></i>
                                            세무계산 실행
                                        </button>
                                        <button type="button" class="btn btn-info btn-lg" onclick="showTaxCalculationHelp()">
                                            <i class="fas fa-question-circle me-2"></i>
                                            계산 도움말
                                        </button>
                                    </div>
                                </div>

                                <!-- 계산 결과 표시 영역 -->
                                <div id="taxCalculationResults" class="d-none">
                                    <h6 class="text-success mb-3">
                                        <i class="fas fa-check-circle me-1"></i>
                                        세무계산 결과
                                    </h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="card border-primary">
                                                <div class="card-header bg-primary text-white">
                                                    <h6 class="mb-0">소득금액 계산</h6>
                                                </div>
                                                <div class="card-body">
                                                    <table class="table table-sm">
                                                        <tr>
                                                            <td>회계상 소득</td>
                                                            <td class="text-end" id="resultBookIncome">-</td>
                                                        </tr>
                                                        <tr>
                                                            <td>손금불산입</td>
                                                            <td class="text-end" id="resultNonDeductible">-</td>
                                                        </tr>
                                                        <tr>
                                                            <td>익금불산입</td>
                                                            <td class="text-end" id="resultNonTaxable">-</td>
                                                        </tr>
                                                        <tr class="table-success">
                                                            <th>과세표준</th>
                                                            <th class="text-end" id="resultTaxableIncome">-</th>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card border-success">
                                                <div class="card-header bg-success text-white">
                                                    <h6 class="mb-0">세액 계산</h6>
                                                </div>
                                                <div class="card-body">
                                                    <table class="table table-sm">
                                                        <tr>
                                                            <td>법인세</td>
                                                            <td class="text-end" id="resultCorporateTax">-</td>
                                                        </tr>
                                                        <tr>
                                                            <td>지방소득세</td>
                                                            <td class="text-end" id="resultLocalIncomeTax">-</td>
                                                        </tr>
                                                        <tr class="table-warning">
                                                            <th>총 납부세액</th>
                                                            <th class="text-end" id="resultTotalTax">-</th>
                                                        </tr>
                                                        <tr>
                                                            <td>실효세율</td>
                                                            <td class="text-end" id="resultEffectiveRate">-</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 신고서 생성 버튼 -->
                                    <div class="row mt-4">
                                        <div class="col-12 text-center">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-warning" onclick="generateTaxReturnPreview()">
                                                    <i class="fas fa-file-alt me-1"></i>
                                                    신고서 미리보기
                                                </button>
                                                <button type="button" class="btn btn-danger" onclick="downloadTaxReturnPDF()">
                                                    <i class="fas fa-file-pdf me-1"></i>
                                                    신고서 다운로드
                                                </button>
                                                <button type="button" class="btn btn-info" onclick="saveTaxCalculationResults()">
                                                    <i class="fas fa-save me-1"></i>
                                                    계산결과 저장
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 저장/취소 버튼 -->
                <div class="row mt-3">
                    <div class="col text-end">
                        <button type="button" class="btn btn-success me-2" onclick="saveAllData()">
                            <i class="fas fa-save"></i> 전체 저장
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetAllForms()">
                            <i class="fas fa-undo"></i> 전체 초기화
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal들 -->
    <!-- ERP 연결 모달 -->
    <div class="modal fade" id="erpModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ERP 연결</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>ERP 시스템과의 연결 기능입니다.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 도움말 모달 -->
    <div class="modal fade" id="helpModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">CoTax 법인정보등록시스템 도움말</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>시스템 사용법</h6>
                    <ul>
                        <li>각 탭을 클릭하여 해당 정보를 입력하세요.</li>
                        <li>필수 입력 항목은 빨간색 별표(*)로 표시됩니다.</li>
                        <li>모든 정보 입력 후 '전체 저장' 버튼을 클릭하세요.</li>
                        <li>데이터는 브라우저의 로컬스토리지에 저장됩니다.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AG-Grid Community Edition JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community@31.0.3/dist/ag-grid-community.min.js"></script>
    <script src="js/code-data.js"></script>
    <script src="js/tax-calculation.js"></script>
    <script src="js/tax-return-generator.js"></script>
    <script src="js/tax-interface.js"></script>
    <script src="js/grid-manager.js"></script>
    <script src="js/main.js"></script>
    <script src="js/sample-data.js"></script>

    <!-- 개발자 도구 패널 - 리퀴드 글래스 스타일 -->
    <div class="floating-controls">
        <!-- 메인 플로팅 버튼 -->
        <div class="floating-main-btn" onclick="toggleFloatingControls()">
            <i class="fas fa-cog" id="floatingMainIcon"></i>
        </div>
        
        <!-- 플로팅 메뉴 -->
        <div class="floating-menu" id="floatingMenu">
            <div class="floating-menu-item" onclick="loadSampleData()" data-tooltip="샘플 데이터 로드">
                <i class="fas fa-database"></i>
            </div>
            <div class="floating-menu-item" onclick="loadRandomTestData()" data-tooltip="랜덤 테스트 데이터">
                <i class="fas fa-random"></i>
            </div>
            <div class="floating-menu-item" onclick="validateAllData()" data-tooltip="데이터 검증">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="floating-menu-item" onclick="showAllCodes()" data-tooltip="전체 코드 조회">
                <i class="fas fa-code"></i>
            </div>
            <div class="floating-menu-item" onclick="exportData()" data-tooltip="데이터 내보내기">
                <i class="fas fa-download"></i>
            </div>
            <div class="floating-menu-item" onclick="importData()" data-tooltip="데이터 가져오기">
                <i class="fas fa-upload"></i>
            </div>
        </div>
    </div>
</body>
</html>